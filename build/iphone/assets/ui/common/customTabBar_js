CustomTabBar=function(settings){var tabBarItems=[];var tabCurrent=0;var resetTabs=function(){for(var i=0;i<tabBarItems.length;i++){tabBarItems[i].image=tabBarItems[i].backgroundImage;}};var assignClick=function(tabItem){tabItem.addEventListener('click',function(e){var pos=e.source.pos;if(tabCurrent==pos){return false;}
settings.tabBar.tabs[pos].active=true;tabCurrent=pos;resetTabs();tabBarItems[pos].image=settings.imagePath+settings.items[pos].selected;});};var customTabBar=Ti.UI.createWindow({height:45,bottom:0,width:"100%",backgroundGradient:{type:'linear',colors:['#fefefe','#e6e6e6']},zIndex:1});var topBorder=Ti.UI.createView({width:"100%",height:1,borderWidth:1,borderColor:"#666666",top:1});var iconHolder=Ti.UI.createView({layout:"horizontal",width:282,top:1,height:45});customTabBar.add(topBorder);for(var i=0;i<settings.items.length;i++){tabBarItems[i]=Ti.UI.createImageView({backgroundImage:settings.imagePath+settings.items[i].image,width:settings.width,height:settings.height});tabBarItems[i].pos=i;assignClick(tabBarItems[i]);iconHolder.add(tabBarItems[i]);}
customTabBar.add(iconHolder);if(settings.hidden){customTabBar.hide();}
customTabBar.open();resetTabs();tabBarItems[0].image=settings.imagePath+settings.items[0].selected;return{hide:function(){customTabBar.hide();},show:function(){customTabBar.show();},select:function(pos){tabBarItems[pos].fireEvent("click");},close:function(){customTabBar.close();},currentTab:function(){return tabCurrent;},open:function(){customTabBar.open();}};};